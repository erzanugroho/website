<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hasil Akhir - HASTMA CUP #3 2026</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lexend', 'Noto Sans', sans-serif;
            background: linear-gradient(180deg, #0a0f1d 0%, #151b2e 100%);
            color: #ffffff;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            color: #ffffff;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.2s;
            margin-bottom: 2rem;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        /* Header Section */
        .header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .header img {
            height: 180px;
            width: auto;
            object-fit: contain;
            margin: 0 auto 15px;
            display: block;
        }

        .header-title {
            font-size: 32px;
            font-weight: 900;
            color: white;
            font-style: italic;
            letter-spacing: -1px;
            line-height: 1;
        }

        .header-subtitle {
            font-size: 14px;
            font-weight: 700;
            color: #eab308;
            letter-spacing: 3px;
            margin-top: 8px;
        }

        /* Main Content Card */
        .main-card {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 24px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.08);
            margin-bottom: 2rem;
        }

        .section-label {
            font-size: 11px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        /* Bracket Grid */
        .bracket-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 2rem;
        }

        @media (max-width: 900px) {
            .bracket-grid {
                grid-template-columns: 1fr;
            }
        }

        .bracket-column {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .column-title {
            font-size: 11px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            margin-bottom: 5px;
        }

        /* Cards */
        .card {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .card-title {
            font-size: 13px;
            font-weight: 800;
            margin-bottom: 12px;
            letter-spacing: 2px;
        }

        .card-title.gold { color: #eab308; }
        .card-title.purple { color: #8b5cf6; }
        .card-title.blue { color: #3b82f6; }

        /* Team Rows */
        .team-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .team-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 12px;
        }

        .team-row.winner {
            background: rgba(34, 197, 94, 0.1);
            border: 2px solid #22c55e;
        }

        .team-row.loser {
            opacity: 0.5;
        }

        .team-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .team-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .team-name {
            font-size: 15px;
            font-weight: 600;
            color: #fff;
        }

        .team-name.dim {
            color: #64748b;
            font-weight: 500;
        }

        .team-rank {
            font-size: 11px;
            font-weight: 800;
            padding: 4px 8px;
            border-radius: 6px;
            margin-left: 6px;
        }

        .rank-1 { background: #eab308; color: #000; }
        .rank-2 { background: #94a3b8; color: #000; }

        .team-score {
            font-size: 18px;
            font-weight: 800;
        }

        .team-score.win { color: #22c55e; }
        .team-score.loss { color: #64748b; }

        /* Match Result */
        .match-result {
            text-align: center;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
        }

        .result-text {
            font-size: 13px;
            color: #22c55e;
            font-weight: 700;
        }

        /* Champion Section */
        .champion-section {
            margin-bottom: 2rem;
        }

        .champion-label {
            font-size: 13px;
            color: #eab308;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-align: center;
            margin-bottom: 12px;
        }

        .champion-card {
            background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%);
            border-radius: 20px;
            padding: 35px 50px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(234, 179, 8, 0.35);
        }

        .champion-name {
            font-size: 48px;
            font-weight: 900;
            color: #000;
            line-height: 1;
        }

        .champion-trophy {
            font-size: 40px;
            margin-bottom: 10px;
        }

        /* Stats Section */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 2rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .stat-label {
            font-size: 11px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 800;
            color: #fff;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.08);
            margin-top: 2rem;
        }

        .footer-text {
            font-size: 14px;
            color: #64748b;
        }

        .footer-url {
            font-size: 16px;
            color: #eab308;
            font-weight: 700;
            margin-top: 5px;
        }

        /* CTA */
        .cta-section {
            text-align: center;
            margin-top: 2rem;
        }

        .btn-primary {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            background: #3b82f6;
            color: white;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
        }

        @media (max-width: 768px) {
            .header img { height: 120px; }
            .header-title { font-size: 24px; }
            .champion-name { font-size: 32px; }
            .bracket-grid { grid-template-columns: 1fr; }
            .main-card { padding: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-btn">
            <span class="material-symbols-outlined">arrow_back</span>
            Kembali
        </a>

        <!-- Header -->
        <div class="header">
            <img src="logo.png" alt="HASTMA CUP">
            <div class="header-title">HASTMA CUP 2026</div>
            <div class="header-subtitle">HASIL AKHIR TURNAMEN</div>
        </div>

        <!-- Main Card -->
        <div class="main-card">
            <div class="section-label">Final Bracket & Group Stage Results</div>

            <!-- Bracket Grid -->
            <div class="bracket-grid">
                <!-- Group Stage -->
                <div class="bracket-column">
                    <div class="column-title">Group Stage</div>
                    
                    <!-- Group A -->
                    <div class="card">
                        <div class="card-title gold">GROUP A</div>
                        <div class="team-list" id="groupAList">
                            <!-- Filled by JS -->
                        </div>
                    </div>

                    <!-- Group B -->
                    <div class="card">
                        <div class="card-title gold">GROUP B</div>
                        <div class="team-list" id="groupBList">
                            <!-- Filled by JS -->
                        </div>
                    </div>
                </div>

                <!-- Semi Finals -->
                <div class="bracket-column">
                    <div class="column-title">Semi Finals</div>
                    
                    <!-- SF1 -->
                    <div class="card">
                        <div class="card-title purple">SEMI FINAL 1</div>
                        <div class="team-list" id="sf1List">
                            <!-- Filled by JS -->
                        </div>
                        <div class="match-result" id="sf1Result"></div>
                    </div>

                    <!-- SF2 -->
                    <div class="card">
                        <div class="card-title purple">SEMI FINAL 2</div>
                        <div class="team-list" id="sf2List">
                            <!-- Filled by JS -->
                        </div>
                        <div class="match-result" id="sf2Result"></div>
                    </div>
                </div>

                <!-- Grand Final -->
                <div class="bracket-column">
                    <div class="column-title">Grand Final</div>
                    
                    <div class="card" style="border: 2px solid rgba(234, 179, 8, 0.4); background: rgba(234, 179, 8, 0.05);">
                        <div class="card-title gold">GRAND FINAL</div>
                        <div class="team-list" id="finalList">
                            <!-- Filled by JS -->
                        </div>
                        <div class="match-result" id="finalResult"></div>
                    </div>

                    <!-- Champion -->
                    <div class="champion-section">
                        <div class="champion-label">üèÜ CHAMPION</div>
                        <div class="champion-card">
                            <div class="champion-trophy">üèÜ</div>
                            <div class="champion-name" id="championName">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tournament Stats -->
            <div class="stats-grid" id="statsGrid">
                <!-- Filled by JS -->
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-text">HASTMA CUP #3 2026 - Mini Soccer Tournament</div>
            <div class="footer-url">hastmacup.my.id</div>
        </div>

        <!-- CTA -->
        <div class="cta-section">
            <a href="pickem.html" class="btn-primary">
                <span class="material-symbols-outlined">sports_soccer</span>
                Lihat Prediksi Saya
            </a>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script>
        // Load tournament data
        let tournamentData = window.DEFAULT_TOURNAMENT_DATA || {};

        // Get data from localStorage if available
        const stored = localStorage.getItem('hastmaCupData');
        if (stored) {
            try {
                tournamentData = JSON.parse(stored);
            } catch (e) {
                console.warn('Failed to parse stored data');
            }
        }

        function getTeam(teamId) {
            if (!teamId) return null;
            return tournamentData.teams?.find(t => t.id === teamId) || null;
        }

        function getMatch(matchId) {
            return tournamentData.matches?.find(m => m.id === matchId) || null;
        }

        function calculateStandings(group) {
            const teams = tournamentData.teams?.filter(t => t.group === group) || [];
            const matches = tournamentData.matches?.filter(
                m => m.stage === 'group' && m.group === group && m.status === 'finished'
            ) || [];

            const standings = teams.map(team => ({
                team,
                played: 0,
                won: 0,
                drawn: 0,
                lost: 0,
                goalsFor: 0,
                goalsAgainst: 0,
                points: 0
            }));

            matches.forEach(match => {
                const home = standings.find(s => s.team.id === match.homeTeam);
                const away = standings.find(s => s.team.id === match.awayTeam);
                if (!home || !away) return;

                home.played++;
                away.played++;
                home.goalsFor += match.homeScore;
                home.goalsAgainst += match.awayScore;
                away.goalsFor += match.awayScore;
                away.goalsAgainst += match.homeScore;

                if (match.homeScore > match.awayScore) {
                    home.won++;
                    home.points += 3;
                    away.lost++;
                } else if (match.homeScore < match.awayScore) {
                    away.won++;
                    away.points += 3;
                    home.lost++;
                } else {
                    home.drawn++;
                    away.drawn++;
                    home.points += 1;
                    away.points += 1;
                }
            });

            return standings.sort((a, b) => 
                b.points - a.points || 
                (b.goalsFor - b.goalsAgainst) - (a.goalsFor - a.goalsAgainst) ||
                b.goalsFor - a.goalsFor
            );
        }

        function renderGroup(groupId, containerId) {
            const standings = calculateStandings(groupId);
            const container = document.getElementById(containerId);
            
            container.innerHTML = standings.map((s, index) => {
                const rankBadge = index < 2 ? `<span class="team-rank rank-${index + 1}">${index + 1}</span>` : '';
                return `
                    <div class="team-row">
                        <div class="team-info">
                            <span class="team-color" style="background: ${s.team.color}"></span>
                            <span class="team-name ${index >= 2 ? 'dim' : ''}">${s.team.name}</span>
                            ${rankBadge}
                        </div>
                        <span class="team-score">${s.points} pts</span>
                    </div>
                `;
            }).join('');
        }

        function renderMatch(matchId, containerId, resultId) {
            const match = getMatch(matchId);
            const container = document.getElementById(containerId);
            const resultContainer = document.getElementById(resultId);
            
            if (!match || !container) return;

            const homeTeam = getTeam(match.homeTeam);
            const awayTeam = getTeam(match.awayTeam);
            
            if (!homeTeam || !awayTeam) {
                container.innerHTML = '<div class="team-row"><span class="team-name dim">TBD</span></div>';
                return;
            }

            const isFinished = match.status === 'finished';
            const homeWin = isFinished && match.homeScore > match.awayScore;
            const awayWin = isFinished && match.awayScore > match.homeScore;

            container.innerHTML = `
                <div class="team-row ${homeWin ? 'winner' : isFinished ? 'loser' : ''}">
                    <div class="team-info">
                        <span class="team-color" style="background: ${homeTeam.color}"></span>
                        <span class="team-name">${homeTeam.name}</span>
                    </div>
                    <span class="team-score ${homeWin ? 'win' : 'loss'}">${match.homeScore}</span>
                </div>
                <div class="team-row ${awayWin ? 'winner' : isFinished ? 'loser' : ''}">
                    <div class="team-info">
                        <span class="team-color" style="background: ${awayTeam.color}"></span>
                        <span class="team-name">${awayTeam.name}</span>
                    </div>
                    <span class="team-score ${awayWin ? 'win' : 'loss'}">${match.awayScore}</span>
                </div>
            `;

            if (resultContainer && isFinished) {
                const winner = homeWin ? homeTeam : awayTeam;
                resultContainer.innerHTML = `<span class="result-text">${winner.name} menang</span>`;
            }
        }

        function renderChampion() {
            const final = getMatch('FINAL') || getMatch('F1');
            if (!final || final.status !== 'finished') {
                document.getElementById('championName').textContent = 'Belum Ditentukan';
                return;
            }

            const champion = final.homeScore > final.awayScore 
                ? getTeam(final.homeTeam) 
                : final.awayScore > final.homeScore 
                    ? getTeam(final.awayTeam) 
                    : null;

            if (champion) {
                document.getElementById('championName').textContent = champion.name;
            }
        }

        function renderStats() {
            const matches = tournamentData.matches || [];
            const finishedMatches = matches.filter(m => m.status === 'finished');
            const totalGoals = finishedMatches.reduce((sum, m) => sum + m.homeScore + m.awayScore, 0);
            
            // Calculate total events
            let totalEvents = 0;
            finishedMatches.forEach(m => {
                totalEvents += (m.events || []).length;
            });

            const container = document.getElementById('statsGrid');
            container.innerHTML = `
                <div class="stat-card">
                    <div class="stat-label">Match Selesai</div>
                    <div class="stat-value">${finishedMatches.length}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Gol</div>
                    <div class="stat-value">${totalGoals}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Event Tercatat</div>
                    <div class="stat-value">${totalEvents}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Tim Peserta</div>
                    <div class="stat-value">${tournamentData.teams?.length || 0}</div>
                </div>
            `;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderGroup('A', 'groupAList');
            renderGroup('B', 'groupBList');
            renderMatch('SF1', 'sf1List', 'sf1Result');
            renderMatch('SF2', 'sf2List', 'sf2Result');
            renderMatch('FINAL', 'finalList', 'finalResult');
            renderChampion();
            renderStats();
        });
    </script>
</body>
</html>
